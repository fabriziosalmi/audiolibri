<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="orientation" content="portrait">
    <title>Audiolibri.org - La piÃ¹ grande collezione di audiolibri italiani gratuiti</title>
    
    <!-- WCAG Accessibility Meta Tags -->
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#4a6cf7" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#ff4343" media="(prefers-color-scheme: dark)">
    <meta name="description" content="Scopri e ascolta la piÃ¹ grande collezione di audiolibri italiani gratuiti. Audiolibri.org offre un'esperienza moderna e facile per gli amanti degli audiolibri in italiano.">
    <meta name="keywords" content="audiolibri, audiolibri italiani, audiolibri gratuiti, libri audio, ascolta libri, romanzi audio, narrativa italiana, letteratura italiana">
    <meta name="author" content="Audiolibri.org">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Italian">
    
    <!-- Web App Meta Tags -->
    <meta name="application-name" content="Audiolibri.org">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Audiolibri">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://audiolibri.org">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://audiolibri.org">
    <meta property="og:title" content="Audiolibri.org - Audiolibri Italiani Gratuiti">
    <meta property="og:description" content="Ascolta gratuitamente migliaia di audiolibri in italiano. La piÃ¹ grande collezione di audiolibri italiani gratuiti.">
    <meta property="og:image" content="/images/og-image.jpg">
    <meta property="og:locale" content="it_IT">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://audiolibri.org">
    <meta property="twitter:title" content="Audiolibri.org - Audiolibri Italiani Gratuiti">
    <meta property="twitter:description" content="Ascolta gratuitamente migliaia di audiolibri in italiano. La piÃ¹ grande collezione di audiolibri italiani gratuiti.">
    <meta property="twitter:image" content="/images/twitter-image.jpg">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/icons/site.webmanifest">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/apple-touch-icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">
    
    <!-- Apple Splash Screens -->
    <link rel="apple-touch-startup-image" href="/icons/apple-splash-2048-2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/icons/apple-splash-1668-2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/icons/apple-splash-1536-2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/icons/apple-splash-1125-2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/icons/apple-splash-750-1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    
    <!-- Fallback favicon for older browsers -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ§</text></svg>">
    
    <!-- Structured Data for Rich Results -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "url": "https://audiolibri.org",
      "name": "Audiolibri.org",
      "description": "La piÃ¹ grande collezione di audiolibri italiani gratuiti",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://audiolibri.org?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="tailwind-styles.css">
    <link rel="stylesheet" href="mobile-navigation.css">
    <link rel="stylesheet" href="mobile-fixes.css">
    <!-- Mobile optimization libraries -->
    <link rel="stylesheet" href="tailwind-mobile.css">
    <link rel="stylesheet" href="tailwind-grid-components.css">
    <link rel="stylesheet" href="tailwind-nav-components.css">
    <link rel="stylesheet" href="tailwind-modern-ios.css">
    
    <!-- Add CSS variables for RGB values -->
    <style>
        :root {
            --primary-rgb: 74, 108, 247;
            --accent-rgb: 16, 185, 129;
            --card-background-rgb: 255, 255, 255;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-rgb: 252, 134, 134;
                --accent-rgb: 3, 218, 198;
                --card-background-rgb: 18, 18, 18;
            }
        }
        /* Prevent FOUC */
        body {
            visibility: visible;
        }
    </style>
    
    <!-- Preload critical CSS to prevent FOUC -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="tailwind-styles.css" as="style">
    
    <!-- Add before other resources -->
    <link rel="preconnect" href="https://www.youtube.com">
    <link rel="dns-prefetch" href="https://www.youtube.com">

    <!-- Add Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Add YouTube API -->
    <script src="https://www.youtube.com/iframe_api" defer></script>
    <script defer src="tailwind-mobile.js"></script>
</head>
<body>
    <div class="container tw-container mobile-container ios-safe-inset">
        <!-- Skip to main content link for screen readers -->
        <a href="#main-content" class="skip-link" aria-label="Salta al contenuto principale">Salta al contenuto</a>
        
        <header role="banner">
            <div class="site-title-container tw-flex tw-flex-col tw-items-center tw-py-3 tw-px-2 sm:tw-py-4">
                <h1 class="tw-flex tw-items-center tw-gap-2">
                    <img src="audiobooks_transparent.png" alt="Logo di Audiolibri.org" class="header-logo" width="40" height="40"> 
                    audiolibri.org
                </h1>
                <p class="site-tagline tw-text-sm">Esplora la piÃ¹ grande collezione di audiolibri italiani gratuiti</p>
            </div>
            
            <div class="header-content tw-flex tw-flex-col tw-gap-4">
                <div class="search-container tw-flex tw-justify-center tw-items-center tw-gap-2 tw-w-full tw-max-w-[650px] tw-mx-auto tw-px-2 sm:tw-px-4" role="search">
                    <label for="search" class="sr-only">Cerca audiolibri per titolo, autore o lettore</label>
                    <input 
                        type="search" 
                        id="search" 
                        class="tw-input tw-mobile-input ios-touch-target tw-w-full" 
                        placeholder="Cerca per titolo, autore o lettore" 
                        aria-label="Cerca audiolibri per titolo, autore o lettore"
                        autocomplete="off"
                        spellcheck="false">
                    <button id="search-button" class="tw-button mobile-button ios-button" type="button" aria-label="Avvia ricerca">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                        <span class="tw-hidden xs:tw-inline">CERCA</span>
                    </button>
                </div>
            </div>
        </header>
        
        <main id="main-content" role="main">
            <div class="single-card fade-in tw-card mobile-card ios-card">
                <div class="audiobook-card tw-relative tw-flex tw-flex-col tw-min-h-[400px] sm:tw-min-h-[500px] tw-bg-cover tw-bg-center" id="current-audiobook" role="region" aria-label="Audiolibro corrente">
                    <!-- Audiobook content will be displayed here -->
                    <div class="loading-container tw-flex tw-flex-col tw-justify-center tw-items-center tw-h-[400px] sm:tw-h-[500px]" role="status" aria-live="polite">
                        <div class="loading-spinner tw-w-[40px] tw-h-[40px] sm:tw-w-[50px] sm:tw-h-[50px] tw-mb-6" aria-hidden="true"></div>
                        <p class="tw-text-base">Caricamento della tua libreria di audiolibri...</p>
                        <small class="tw-text-secondary-text tw-mt-2">Attendi mentre prepariamo la tua collezione</small>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Changelog Card - New Addition -->
        <section id="changelog-card" class="changelog-card fade-in tw-card mobile-card tw-transition-all tw-duration-300 tw-mt-4" role="region" aria-labelledby="changelog-title">
            <div class="changelog-header tw-flex tw-justify-between tw-items-center tw-p-3 sm:tw-p-4 tw-border-b tw-border-border">
                <h2 id="changelog-title" class="tw-m-0 tw-text-xs sm:tw-text-sm tw-font-medium">Ultimi aggiornamenti</h2>
                <button 
                    id="changelog-toggle" 
                    class="icon-button tw-bg-transparent tw-border-none tw-w-8 tw-h-8 tw-rounded-full tw-flex tw-items-center tw-justify-center tap-highlight-none" 
                    aria-label="Mostra o nascondi gli ultimi aggiornamenti"
                    aria-expanded="true"
                    aria-controls="changelog-content"
                    type="button">
                    <span class="collapse-icon tw-block tw-transition-transform tw-duration-300" aria-hidden="true">âˆ’</span>
                </button>
            </div>
            <div id="changelog-content" class="changelog-content tw-p-3 tw-text-sm sm:tw-p-4" role="status" aria-live="polite">
                <div class="loading-spinner small tw-w-5 tw-h-5 sm:tw-w-6 sm:tw-h-6 tw-border-[3px] tw-mx-auto tw-my-4" aria-hidden="true"></div>
                <p class="tw-text-center tw-text-xs sm:tw-text-sm">Caricamento aggiornamenti...</p>
            </div>
        </section>
        
        <footer class="tw-text-center tw-mt-6 sm:tw-mt-8 tw-pt-4 sm:tw-pt-6 tw-border-t tw-border-border ios-bottom-safe" role="contentinfo">
            <div class="footer-content tw-flex tw-items-center tw-gap-3 sm:tw-gap-4 tw-justify-center tw-flex-wrap tw-px-2 tw-pb-4 sm:tw-pb-2">
                <button 
                    id="theme-toggle" 
                    class="tw-bg-transparent tw-text-text tw-border tw-border-border tw-py-1.5 sm:tw-py-2 tw-px-3 sm:tw-px-4 tw-text-xs sm:tw-text-sm tw-inline-flex tw-items-center tw-gap-1.5 sm:tw-gap-2 tw-rounded-full tap-highlight-none" 
                    aria-label="Cambia tema da chiaro a scuro"
                    type="button">
                    <span class="theme-icon tw-text-sm sm:tw-text-base" aria-hidden="true">ðŸŒ“</span>
                    <span id="theme-label">Cambia Tema</span>
                </button>
                <a 
                    href="https://github.com/fabriziosalmi/audiolibri" 
                    class="source-code-link tw-flex tw-items-center tw-gap-1 sm:tw-gap-1.5 tw-no-underline tw-text-inherit tw-border tw-border-border tw-py-0.5 tw-px-3 sm:tw-px-4 tw-rounded-full tw-text-xs sm:tw-text-sm tw-transition-all" 
                    aria-label="Visualizza il codice sorgente su GitHub (si apre in una nuova finestra)"
                    target="_blank"
                    rel="noopener noreferrer">
                    <span class="source-icon tw-text-base sm:tw-text-lg" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" focusable="false">
                            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                        </svg>
                    </span>
                    <span>Codice sorgente</span>
                </a>
            </div>
        </footer>
    </div>
    
    <script src="audiobooks.js"></script> <!-- Your JSON data converted to a JS variable -->
    <script src="app.js"></script>
    <script src="mobile-navigation.js"></script> <!-- Enhanced mobile navigation script -->
    <script src="mobile-enhancements.js"></script> <!-- Additional mobile UI enhancements -->
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('[ServiceWorker] Registration successful with scope:', registration.scope);
                    })
                    .catch(err => {
                        console.error('[ServiceWorker] Registration failed:', err);
                    });
            });
        }
    </script>
</body>
</html>